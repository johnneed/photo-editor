{"version":3,"sources":["../../../app/src/editor-state.js"],"names":[],"mappings":"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","file":"editor-state.js","sourcesContent":["/*\n* Remove undefined keys and return a POJO;\n*/\nfunction _prune(obj){\n    obj = (typeof obj === \"object\")? obj : {};\n    return  Object.keys(obj).reduce((pojo,key) => {\n        if (typeof this[key] !== 'undefined') {\n            pojo[key] = this[key];\n        }\n        return pojo;\n    },{});\n}\n\n\nexport default class EditorState {\n    constructor(state) {\n        state = state || {};\n        this.image = state.image; //pixels\n        this.clipStartX = state.clipStartX;  //pixels\n        this.clipStartY = state.clipStartY; //pixels\n        this.clipHeight = state.clipHeight; //pixels\n        this.clipWidth = state.clipWidth; //pixels\n        this.imageStartX = state.imageStartX; //pixels\n        this.imageStartY = state.imageStartY; //pixels\n        this.imageWidth = state.imageWidth; //pixels\n        this.imageHeight = state.imageHeight; //pixels\n        this.canvasWidth = state.canvasWidth; //pixels\n        this.canvasHeight = state.canvasHeight; //pixels\n        this.rotation = state.rotation; //radians\n    }\n\n    prune(){\n     return  _prune(this);\n    }\n\n    merge(state){\n        return Object.assign(this,_prune(state));\n    }\n    fill (state){\n        Object.keys(this).forEach((key) => {\n            this[key] = (typeof this[key] === \"undefined\") ? state[key] : this[key];\n        });\n        return this;\n    }\n    combine(state){\n        this.image = state.image || this.image;\n        this.clipStartX = (this.clipStartX || 0) + (state.clipStartX || 0);\n        this.clipStartY = (this.clipStartY || 0) + (state.clipStartY || 0);\n        this.clipHeight = (this.clipHeight || 0) + (state.clipHeight || 0);\n        this.clipWidth = (this.clipWidth || 0) + (state.clipWidth || 0);\n        this.imageStartX = (this.imageStartX || 0) + (state.imageStartX || 0);\n        this.imageStartY = (this.imageStartY || 0) + (state.imageStartY|| 0);\n        this.imageWidth = (this.imageWidth || 0) + (state.imageWidth || 0);\n        this.imageHeight = (this.imageHeight || 0) + (state.imageHeight || 0);\n        this.canvasWidth = (this.canvasWidth || 0) + (state.canvasWidth || 0);\n        this.canvasHeight = (this.canvasHeight || 0) + (state.canvasHeight || 0);\n        this.rotation = (this.rotation || 0) + (state.rotation || 0);\n    }\n}"]}