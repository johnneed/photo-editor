{"version":3,"sources":["../../../app/src/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import {default as Editor} from './editor';\r\nimport {getOffset} from \"./utilities\";\r\n\r\n\r\n(function () {\r\n    \"use strict\";\r\n\r\n    var fileInput = document.getElementById(\"fileInput\");\r\n    var scaleControl = document.getElementById(\"scaleImageControl\");\r\n    var moveControl = document.getElementById(\"moveImageControl\");\r\n    var cropControl = document.getElementById(\"cropImageControl\");\r\n    var editorBox = document.getElementById(\"editor\");\r\n    var saveButton = document.getElementById(\"save\");\r\n    var rotateControl0 = document.getElementById(\"rotateImageControl0\");\r\n    var rotateControl90 = document.getElementById(\"rotateImageControl90\");\r\n    var rotateControl180 = document.getElementById(\"rotateImageControl180\");\r\n    var rotateControl270 = document.getElementById(\"rotateImageControl270\");\r\n    var myEditor;\r\n    var mouseStartX;\r\n    var mouseStartY;\r\n    var mouseEndX;\r\n    var mouseEndY;\r\n    var offset;\r\n    var canvasWidth;\r\n    var canvasHeight;\r\n    var isDragging;\r\n    var isCropping;\r\n\r\n\r\n    function addPic(event) {\r\n        myEditor = new Editor(event.target.files[0]);\r\n\r\n        while (editorBox.hasChildNodes()) {\r\n            editorBox.removeChild(editorBox.lastChild);\r\n        }\r\n        editorBox.appendChild(myEditor.canvas);\r\n        offset = getOffset(myEditor.canvas)\r\n\r\n        canvasWidth = myEditor.canvas.width;\r\n        canvasHeight = myEditor.canvas.height;\r\n\r\n        window.editor = myEditor;\r\n        saveButton.setAttribute('href', myEditor.save());\r\n    }\r\n\r\n    function scalePic(event) {\r\n        console.log('scalePic : ' + event.target.value);\r\n        myEditor.scale(event.target.value);\r\n    }\r\n\r\n    function startDrag(e) {\r\n        console.log(e);\r\n        mouseStartX = parseInt(e.clientX, 10);\r\n        mouseStartY = parseInt(e.clientY, 10);\r\n        console.log('start-drag : X ' + mouseStartX + ' Y ' + mouseStartY);\r\n\r\n        // set the drag flag\r\n        isDragging = true;\r\n    }\r\n\r\n    function endDrag(e) {\r\n        console.log(e);\r\n        var canMouseX = parseInt(e.clientX, 10) - mouseStartX;\r\n        var canMouseY = parseInt(e.clientY, 10) - mouseStartY;\r\n        console.log('end-drag : X ' + canMouseX + ' Y ' + canMouseY);\r\n        if (isDragging) {\r\n            myEditor.move({\r\n                x: (canMouseX),\r\n                y: (canMouseY)\r\n            })\r\n        }\r\n        // clear the drag flag\r\n        isDragging = false;\r\n\r\n    }\r\n\r\n    function dragging(e) {\r\n        var canMouseX = parseInt(e.clientX, 10) - mouseStartX;\r\n        var canMouseY = parseInt(e.clientY, 10) - mouseStartY;\r\n        // if the drag flag is set, clear the canvas and draw the image\r\n        if (isDragging) {\r\n            console.log('drag : X ' + canMouseX + ' Y ' + canMouseY);\r\n\r\n            myEditor.redraw({\r\n                x: (canMouseX),\r\n                y: (canMouseY)\r\n            });\r\n            //   myEditor.canvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\r\n            //   myEditor.canvasContext.drawImage(myEditor.originalImage, canMouseX - 128 / 2, canMouseY - 120 / 2, 128, 120);\r\n        }\r\n    }\r\n\r\n    function startCrop(e) {\r\n        console.log(e);\r\n\r\n        mouseStartX = parseInt(e.clientX, 10);\r\n        mouseStartY = parseInt(e.clientY, 10);\r\n        console.log('start-crop : X ' + mouseStartX + ' Y ' + mouseStartY);\r\n\r\n        // set the crop flag\r\n        isCropping = true;\r\n    }\r\n\r\n    function cropping(e) {\r\n        var canMouseX = parseInt(e.clientX, 10) - mouseStartX;\r\n        var canMouseY = parseInt(e.clientY, 10) - mouseStartY;\r\n        // if the crop flag is set, clear the canvas and draw the image\r\n        if (isCropping) {\r\n            // console.log('crop : X ' + mouseStartX - offset.left + ' Y ' +  mouseStartY - offset.top);\r\n\r\n            myEditor.drawBox({\r\n                sx: mouseStartX - offset.left,\r\n                sy: mouseStartY - offset.top,\r\n                swidth : canMouseX,\r\n                sheight : canMouseY\r\n            });\r\n            //   myEditor.canvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\r\n            //   myEditor.canvasContext.drawImage(myEditor.originalImage, canMouseX - 128 / 2, canMouseY - 120 / 2, 128, 120);\r\n        }\r\n    }\r\n\r\n    function endCrop(e) {\r\n        console.log(e);\r\n        mouseEndX = parseInt(e.clientX, 10) - mouseStartX;\r\n        mouseEndY = parseInt(e.clientY, 10) - mouseStartY;\r\n\r\n        console.log('end-crop : X ' + mouseEndX + ' Y ' + mouseEndY);\r\n        if (isCropping) {\r\n            myEditor.crop({\r\n                sx: (mouseEndX > 0) ?  mouseStartX - offset.left : parseInt(e.clientX, 10) - offset.left,\r\n                sy: (mouseEndY > 0) ?  mouseStartY - offset.top : parseInt(e.clientY, 10) - offset.top,\r\n                swidth : Math.abs(mouseEndX),\r\n                sheight : Math.abs(mouseEndY)\r\n            })\r\n        }\r\n        // clear the crop flag\r\n        isCropping = false;\r\n    }\r\n\r\n\r\n\r\n    function movePic(event) {\r\n\r\n        if (event.target.checked) {\r\n            myEditor.canvas.setAttribute('class', (myEditor.canvas.className + \" is-moving\").trim());\r\n            myEditor.canvas.addEventListener('mousedown', startDrag);\r\n            myEditor.canvas.addEventListener('mousemove', dragging);\r\n            myEditor.canvas.addEventListener('mouseup', endDrag);\r\n            myEditor.canvas.addEventListener('mouseout', endDrag);\r\n\r\n\r\n        } else {\r\n            myEditor.canvas.setAttribute('class', myEditor.canvas.className.replace(\"is-moving\", \"\").trim());\r\n            myEditor.canvas.removeEventListener('mousedown', startDrag);\r\n            myEditor.canvas.removeEventListener('mousemove', dragging);\r\n            myEditor.canvas.removeEventListener('mouseup', endDrag);\r\n            myEditor.canvas.removeEventListener('mouseout', endDrag);\r\n        }\r\n    }\r\n\r\n    function cropPic(event) {\r\n\r\n        if (event.target.checked) {\r\n            offset = getOffset(myEditor.canvas);\r\n            myEditor.canvas.setAttribute('class', (myEditor.canvas.className + \" is-cropping\").trim());\r\n            myEditor.canvas.addEventListener('mousedown', startCrop);\r\n            myEditor.canvas.addEventListener('mousemove', cropping);\r\n            myEditor.canvas.addEventListener('mouseup', endCrop);\r\n            myEditor.canvas.addEventListener('mouseout', endCrop);\r\n        } else {\r\n            myEditor.canvas.setAttribute('class', myEditor.canvas.className.replace(\"is-cropping\", \"\").trim());\r\n            myEditor.canvas.removeEventListener('mousedown', startCrop);\r\n            myEditor.canvas.removeEventListener('mousemove', cropping);\r\n            myEditor.canvas.removeEventListener('mouseup', endCrop);\r\n            myEditor.canvas.removeEventListener('mouseout', endCrop);\r\n        }\r\n    }\r\n\r\n    function save(event){\r\n        saveButton.href=myEditor.canvas.toDataURL(myEditor.mimeType);\r\n        saveButton.download = myEditor.fileName;\r\n    }\r\n\r\n    function rotate(event){\r\n         if(event.target.checked){\r\n             myEditor.rotate(parseInt(event.target.value,10));\r\n         }\r\n\r\n    }\r\n    \r\n    fileInput.addEventListener('change', addPic);\r\n    scaleControl.addEventListener('input', scalePic);\r\n    moveControl.addEventListener('change', movePic);\r\n    cropControl.addEventListener('change', cropPic);\r\n    saveButton.addEventListener('click', save);\r\n    rotateControl0.addEventListener('change', rotate);\r\n    rotateControl90.addEventListener('change', rotate);\r\n    rotateControl180.addEventListener('change', rotate);\r\n    rotateControl270.addEventListener('change', rotate);\r\n}());\r\n"]}